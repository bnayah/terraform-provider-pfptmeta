---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "Resource pfptmeta_app - terraform-provider-pfptmeta"
subcategory: "Adaptive Access Control Rule"
description: |-
  Application for configuring SSO by SPs based on SAML or OIDC protocols
---

# Resource (pfptmeta_app)

Application for configuring SSO by SPs based on SAML or OIDC protocols

## Example Usage

```terraform
variable "mappedAttributes" {
  type = list(map(string))
  default = [
    {
      attribute_format     = "unspecified"
      target_variable_name = "first_name"
      variable_name        = "given_name"
    },
    {
      attribute_format     = "unspecified"
      target_variable_name = "last_name"
      variable_name        = "family_name"
    },
    {
      target_variable_name = "groups"
      variable_name        = "groups"
      filter_type          = "equals"
      filter_value         = "grp1"
    },
    {
      variable_name = "tags"
      filter_type   = "all"
    },
  ]
}

resource "pfptmeta_app" "app_saml" {
  name             = "saml app name"
  description      = "saml app description"
  enabled          = true
  visible          = true
  ip_whitelist     = ["1.1.1.1"]
  direct_sso_login = "idp-abcd1234"
  assigned_members = ["usr-abcd1234"]
  protocol         = "SAML"

  saml {
    audience_uri              = "https://audience.myApp.com"
    sso_acs_url               = "https://login.myApp.example.com"
    destination               = "https://login.myApp.example.com"
    recipient                 = "https://login.myApp.example.com"
    default_relay_state       = "https://relay.myApp.com"
    subject_name_id_attribute = "email"
    subject_name_id_format    = "emailAddress"
    signature_algorithm       = "RSA-SHA256"
    digest_algorithm          = "SHA256"
  }

  dynamic "mapped_attributes" {
    for_each = var.mappedAttributes
    content {
      variable_name        = mapped_attributes.value.variable_name
      attribute_format     = try(mapped_attributes.value.attribute_format, null)
      target_variable_name = try(mapped_attributes.value.target_variable_name, null)
      filter_type          = try(mapped_attributes.value.filter_type, null)
      filter_value         = try(mapped_attributes.value.filter_value, null)
    }
  }
}

resource "pfptmeta_app" "app_oidc" {
  name             = "oidc app name"
  description      = "oidc app description"
  enabled          = true
  visible          = true
  ip_whitelist     = ["1.1.1.1"]
  assigned_members = ["usr-abcd1234"]
  protocol         = "OIDC"

  oidc {
    sign_in_redirect_urls = ["https://login.myApp.example.com"]
    grant_types           = ["authorization_code"]
    scopes                = ["openid", "profile", "email"]
    initiate_login_url    = "https://intial-login.myApp.example.com"
  }
}

resource "pfptmeta_app" "app_office365" {
  name             = "office-365 app name"
  description      = "office-365 app description"
  enabled          = true
  assigned_members = ["usr-abcd1234"]
  protocol         = "SAML"

  saml {
    audience_uri              = "https://audience.myApp.com"
    sso_acs_url               = "https://login.myApp.example.com"
    destination               = "https://login.myApp.example.com"
    recipient                 = "https://login.myApp.example.com"
    default_relay_state       = "https://relay.myApp.com"
    subject_name_id_attribute = "email"
    subject_name_id_format    = "emailAddress"
    signature_algorithm       = "RSA-SHA256"
    digest_algorithm          = "SHA256"
  }

  domain_federation {
    domain = "my-office365-domain.com"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String)
- `protocol` (String) The protocol that the SSO uses for this application. After defining the protocol on SSO creation, it cannot be changed. Options: SAML/OIDC

### Optional

- `assigned_members` (Set of String) Users and groups which the application is applied to
- `description` (String)
- `direct_sso_login` (String) IDP to use when logging into Proofpoint NaaS directly, while performing SSO login to SP
- `domain_federation` (Block List, Max: 1) SSO configuration for Office-365 SP (see [below for nested schema](#nestedblock--domain_federation))
- `enabled` (Boolean)
- `ip_whitelist` (Set of String) List of IPs allowed to be authenticated by the application
- `mapped_attributes` (Block List, Max: 15) User attributes to map and return to SP upon successful SAML assertion/OIDC authorization (see [below for nested schema](#nestedblock--mapped_attributes))
- `oidc` (Block List, Max: 1) OIDC-based app properties (see [below for nested schema](#nestedblock--oidc))
- `saml` (Block List, Max: 1) SAML-based app properties (see [below for nested schema](#nestedblock--saml))
- `visible` (Boolean) Application visibility, defining whether to display application to user or not

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--domain_federation"></a>
### Nested Schema for `domain_federation`

Required:

- `domain` (String) Office-365 domain to be federated


<a id="nestedblock--mapped_attributes"></a>
### Nested Schema for `mapped_attributes`

Required:

- `variable_name` (String) Variable name where the value for the attribute is acquired from. Options: given_name, family_name, email, phone, groups, tags

Optional:

- `attribute_format` (String) Format in which the name attribute is provided to the app. Options: unspecified, basic, uri
- `filter_type` (String) Filter type to use when returning the attributes to SP. Options: all, starts_with, equals
- `filter_value` (String) Filter type value ('starts_with' and 'equals') to compare the actual value to
- `target_variable_name` (String) Name for the attribute as it is presented in SP


<a id="nestedblock--oidc"></a>
### Nested Schema for `oidc`

Required:

- `scopes` (Set of String) Scopes of allowed access token for OIDC
- `sign_in_redirect_urls` (Set of String) Redirect URLs which are allowed after successful authorization

Optional:

- `grant_types` (Set of String) OIDC-supported access/ID token grant types
- `initiate_login_url` (String) Login URL for IdP-initiated flow

Read-Only:

- `access_token_lifetime` (Number) Validity period (in minutes) for access token from the moment it is generated
- `id_token_lifetime` (Number) Validity period (in minutes) for ID token from the moment it is generated


<a id="nestedblock--saml"></a>
### Nested Schema for `saml`

Required:

- `audience_uri` (String) SP Entity ID
- `destination` (String) Destination within the SAML assertion
- `recipient` (String) The location for the app to present the SAML assertion
- `sso_acs_url` (String) Single Sign-On URL
- `subject_name_id_attribute` (String) SAML name ID type to identify the subject of the SSO request

Optional:

- `default_relay_state` (String) SAML default relay state URL to use after successful assertion
- `digest_algorithm` (String) SAML assertion digest algorithm
- `signature_algorithm` (String) SAML assertion signature algorithm
- `subject_name_id_format` (String) ID format for SAML name

Read-Only:

- `authn_context_class` (String) SAML authentication context class to be configured at the SP side
- `idp_issuer` (String) SAML issuer to be configured at the SP side
- `idp_sso_url` (String) SAML url to be configured at SP side
- `x509_cert` (String) SAML certificate to be configured at SP side
